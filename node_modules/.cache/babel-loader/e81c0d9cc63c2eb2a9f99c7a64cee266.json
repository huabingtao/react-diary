{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'../utils/request';import{List,InputItem,Button,Toast}from'antd-mobile';import{Link}from'react-router-dom';import'../styles/register.css';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this));_this.state={};return _this;}_createClass(Login,[{key:\"onLogin\",value:function(){var _onLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var _this$state,email,password,res,storage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=this.state,email=_this$state.email,password=_this$state.password;_context.next=3;return axios.post('user/login',{email:email,password:password});case 3:res=_context.sent;storage=window.localStorage;storage.setItem('user',JSON.stringify(res.data.user));Toast.success('登录成功',1.5,function(_){_this2.props.history.push('/index');});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function onLogin(){return _onLogin.apply(this,arguments);}return onLogin;}()},{key:\"onChangeEmail\",value:function onChangeEmail(email){this.setState({email:email});}},{key:\"onChangePassword\",value:function onChangePassword(password){this.setState({password:password});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"login-container\"},React.createElement(\"div\",{className:\"logo\"},React.createElement(\"svg\",{className:\"icon svg-icon\",\"aria-hidden\":\"true\"},React.createElement(\"use\",{href:\"#icon-bianjilan\"})),React.createElement(\"h1\",null,\"\\u543E\\u8BB0\")),React.createElement(\"div\",{className:\"input\"},React.createElement(List,null,React.createElement(InputItem,{type:\"text\",clear:true,placeholder:\"input your email\",onChange:this.onChangeEmail.bind(this)},\"\\u90AE\\u7BB1\"),React.createElement(InputItem,{clear:true,type:\"password\",placeholder:\"****\",onChange:this.onChangePassword.bind(this)},\"\\u5BC6\\u7801\"))),React.createElement(\"div\",{className:\"btn-wrap\"},React.createElement(Button,{className:\"btn\",type:\"primary\",onClick:this.onLogin.bind(this)},\"\\u767B\\u5F55\"),\"\\u6CA1\\u6709\\u8D26\\u53F7?\",React.createElement(Link,{className:\"btn-link\",to:\"/register\"},\"\\u6CE8\\u518C\")));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/Users/hbt/MyProject/gitHub/react-diary/src/views/login.jsx"],"names":["React","axios","List","InputItem","Button","Toast","Link","Login","state","email","password","post","res","storage","window","localStorage","setItem","JSON","stringify","data","user","success","_","props","history","push","setState","onChangeEmail","bind","onChangePassword","onLogin","Component"],"mappings":"i2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CACA,OAASC,IAAT,CAAeC,SAAf,CAA0BC,MAA1B,CAAkCC,KAAlC,KAA+C,aAA/C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,wBAAP,C,GAEMC,CAAAA,K,2EACJ,gBAAc,uCACZ,yEACA,MAAKC,KAAL,CAAa,EAAb,CAFY,aAGb,C,mUAE6B,KAAKA,K,CAAzBC,K,aAAAA,K,CAAOC,Q,aAAAA,Q,uBACGT,CAAAA,KAAK,CAACU,IAAN,CAAW,YAAX,CAAyB,CACzCF,KAAK,CAALA,KADyC,CAEzCC,QAAQ,CAARA,QAFyC,CAAzB,C,QAAZE,G,eAIAC,O,CAAUC,MAAM,CAACC,Y,CACvBF,OAAO,CAACG,OAAR,CAAgB,MAAhB,CAAwBC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACO,IAAJ,CAASC,IAAxB,CAAxB,EACAf,KAAK,CAACgB,OAAN,CAAc,MAAd,CAAsB,GAAtB,CAA2B,SAAAC,CAAC,CAAI,CAC9B,MAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACD,CAFD,E,8LAIYhB,K,CAAO,CACnB,KAAKiB,QAAL,CAAc,CACZjB,KAAK,CAALA,KADY,CAAd,EAGD,C,0DACgBC,Q,CAAU,CACzB,KAAKgB,QAAL,CAAc,CACZhB,QAAQ,CAARA,QADY,CAAd,EAGD,C,uCACQ,CACP,MACE,4BAAK,SAAS,CAAC,iBAAf,EACE,2BAAK,SAAS,CAAC,MAAf,EACE,2BAAK,SAAS,CAAC,eAAf,CAA+B,cAAY,MAA3C,EACE,2BAAK,IAAI,CAAC,iBAAV,EADF,CADF,CAIE,6CAJF,CADF,CAOE,2BAAK,SAAS,CAAC,OAAf,EACE,oBAAC,IAAD,MACE,oBAAC,SAAD,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAE,IAFT,CAGE,WAAW,CAAC,kBAHd,CAIE,QAAQ,CAAE,KAAKiB,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAJZ,iBADF,CASE,oBAAC,SAAD,EACE,KAAK,CAAE,IADT,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,MAHd,CAIE,QAAQ,CAAE,KAAKC,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAJZ,iBATF,CADF,CAPF,CA2BE,2BAAK,SAAS,CAAC,UAAf,EACE,oBAAC,MAAD,EACE,SAAS,CAAC,KADZ,CAEE,IAAI,CAAC,SAFP,CAGE,OAAO,CAAE,KAAKE,OAAL,CAAaF,IAAb,CAAkB,IAAlB,CAHX,iBADF,6BASE,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,CAAC,WAA9B,iBATF,CA3BF,CADF,CA2CD,C,mBAvEiB5B,KAAK,CAAC+B,S,EA0E1B,cAAexB,CAAAA,KAAf","sourcesContent":["import React from 'react'\nimport axios from '../utils/request'\nimport { List, InputItem, Button, Toast } from 'antd-mobile'\nimport { Link } from 'react-router-dom'\nimport '../styles/register.css'\n\nclass Login extends React.Component {\n  constructor() {\n    super()\n    this.state = {}\n  }\n  async onLogin() {\n    const { email, password } = this.state\n    const res = await axios.post('user/login', {\n      email,\n      password\n    })\n    const storage = window.localStorage\n    storage.setItem('user', JSON.stringify(res.data.user))\n    Toast.success('登录成功', 1.5, _ => {\n      this.props.history.push('/index')\n    })\n  }\n  onChangeEmail(email) {\n    this.setState({\n      email\n    })\n  }\n  onChangePassword(password) {\n    this.setState({\n      password\n    })\n  }\n  render() {\n    return (\n      <div className=\"login-container\">\n        <div className=\"logo\">\n          <svg className=\"icon svg-icon\" aria-hidden=\"true\">\n            <use href=\"#icon-bianjilan\" />\n          </svg>\n          <h1>吾记</h1>\n        </div>\n        <div className=\"input\">\n          <List>\n            <InputItem\n              type=\"text\"\n              clear={true}\n              placeholder=\"input your email\"\n              onChange={this.onChangeEmail.bind(this)}\n            >\n              邮箱\n            </InputItem>\n            <InputItem\n              clear={true}\n              type=\"password\"\n              placeholder=\"****\"\n              onChange={this.onChangePassword.bind(this)}\n            >\n              密码\n            </InputItem>\n          </List>\n        </div>\n        <div className=\"btn-wrap\">\n          <Button\n            className=\"btn\"\n            type=\"primary\"\n            onClick={this.onLogin.bind(this)}\n          >\n            登录\n          </Button>\n          没有账号?\n          <Link className=\"btn-link\" to=\"/register\">\n            注册\n          </Link>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}