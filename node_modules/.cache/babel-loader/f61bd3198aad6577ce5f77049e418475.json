{"ast":null,"code":"import axios from\"axios\";import Qs from\"qs\";import{Toast}from\"antd-mobile\";var instance=axios.create({baseURL:\"http://139.196.94.6:3000/\",timeout:5000});// request 拦截\ninstance.interceptors.request.use(function(config){if(config.method===\"get\"){config.paramsSerializer=function(params){return Qs.stringify(params,{arrayFormat:\"brackets\"});};}return config;},function(error){return Promise.reject(error);});// response 拦截\ninstance.interceptors.response.use(function(response){// 接口请求成功处理\nreturn response;},function(error){// 提示给用户具体报错信息\nvar errObj=JSON.parse(JSON.stringify(error));if(errObj.message===\"Network Error\"){Toast.fail(\"服务器异常请稍后再试\",2);return Promise.reject();}Toast.fail(error.response.data.message,2);return Promise.reject(error);});export default instance;","map":{"version":3,"sources":["/Users/hbt/MyProject/gitHub/react-diary/src/utils/request.js"],"names":["axios","Qs","Toast","instance","create","baseURL","timeout","interceptors","request","use","config","method","paramsSerializer","params","stringify","arrayFormat","error","Promise","reject","response","errObj","JSON","parse","message","fail","data"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,EAAP,KAAe,IAAf,CACA,OAASC,KAAT,KAAsB,aAAtB,CAEA,GAAMC,CAAAA,QAAQ,CAAGH,KAAK,CAACI,MAAN,CAAa,CAC5BC,OAAO,CAAE,2BADmB,CAE5BC,OAAO,CAAE,IAFmB,CAAb,CAAjB,CAKA;AACAH,QAAQ,CAACI,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,SAAAC,MAAM,CAAI,CACR,GAAIA,MAAM,CAACC,MAAP,GAAkB,KAAtB,CAA6B,CAC3BD,MAAM,CAACE,gBAAP,CAA0B,SAAAC,MAAM,CAAI,CAClC,MAAOZ,CAAAA,EAAE,CAACa,SAAH,CAAaD,MAAb,CAAqB,CAAEE,WAAW,CAAE,UAAf,CAArB,CAAP,CACD,CAFD,CAGD,CACD,MAAOL,CAAAA,MAAP,CACD,CARH,CASE,SAAAM,KAAK,CAAI,CACP,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACD,CAXH,EAcA;AACAb,QAAQ,CAACI,YAAT,CAAsBY,QAAtB,CAA+BV,GAA/B,CACE,SAAAU,QAAQ,CAAI,CACV;AACA,MAAOA,CAAAA,QAAP,CACD,CAJH,CAKE,SAAAH,KAAK,CAAI,CACP;AACA,GAAII,CAAAA,MAAM,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACP,SAAL,CAAeE,KAAf,CAAX,CAAb,CACA,GAAII,MAAM,CAACG,OAAP,GAAmB,eAAvB,CAAwC,CACtCrB,KAAK,CAACsB,IAAN,CAAW,YAAX,CAAyB,CAAzB,EACA,MAAOP,CAAAA,OAAO,CAACC,MAAR,EAAP,CACD,CACDhB,KAAK,CAACsB,IAAN,CAAWR,KAAK,CAACG,QAAN,CAAeM,IAAf,CAAoBF,OAA/B,CAAwC,CAAxC,EACA,MAAON,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACD,CAdH,EAiBA,cAAeb,CAAAA,QAAf","sourcesContent":["import axios from \"axios\";\nimport Qs from \"qs\";\nimport { Toast } from \"antd-mobile\";\n\nconst instance = axios.create({\n  baseURL: \"http://139.196.94.6:3000/\",\n  timeout: 5000\n});\n\n// request 拦截\ninstance.interceptors.request.use(\n  config => {\n    if (config.method === \"get\") {\n      config.paramsSerializer = params => {\n        return Qs.stringify(params, { arrayFormat: \"brackets\" });\n      };\n    }\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// response 拦截\ninstance.interceptors.response.use(\n  response => {\n    // 接口请求成功处理\n    return response;\n  },\n  error => {\n    // 提示给用户具体报错信息\n    let errObj = JSON.parse(JSON.stringify(error));\n    if (errObj.message === \"Network Error\") {\n      Toast.fail(\"服务器异常请稍后再试\", 2);\n      return Promise.reject();\n    }\n    Toast.fail(error.response.data.message, 2);\n    return Promise.reject(error);\n  }\n);\n\nexport default instance;\n"]},"metadata":{},"sourceType":"module"}