{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/hbt/MyProject/gitHub/react-diary/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Modal,Toast}from'antd-mobile';import axios from'../utils/request';var alert=Modal.alert;function Header(props){var style={wrap:{display:'flex',color:'#fff',fontSize:'1.2rem',height:'3rem',justifyContent:'space-between',alignItems:'center',padding:'0 1rem',background:'#53a6db'},feature:{display:'flex',width:'100px',justifyContent:'space-between',alignItems:'center',marginRight:'-0.5rem'},icon:{width:'2rem',height:'2rem',padding:'0.2rem',color:'#fff'}};return React.createElement(\"div\",{style:style.wrap},React.createElement(\"span\",{onClick:props.onClickGoback},\"\\u8FD4\\u56DE\"),React.createElement(\"div\",{style:style.feature},React.createElement(\"div\",{onClick:props.onClickDelete},React.createElement(\"svg\",{className:\"icon svg-icon\",style:style.icon,\"aria-hidden\":\"true\"},React.createElement(\"use\",{href:\"#icon-shanchu\"}))),React.createElement(\"div\",{onClick:props.onClickModify},React.createElement(\"svg\",{className:\"icon svg-icon\",style:style.icon,\"aria-hidden\":\"true\"},React.createElement(\"use\",{href:\"#icon-bianji\"})))));}var DiaryDetail=/*#__PURE__*/function(_React$Component){_inherits(DiaryDetail,_React$Component);function DiaryDetail(props){var _this;_classCallCheck(this,DiaryDetail);_this=_possibleConstructorReturn(this,_getPrototypeOf(DiaryDetail).call(this,props));_this.state={detail:'',id:_this.props.match.params.id};return _this;}_createClass(DiaryDetail,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDiaryDetail();}},{key:\"getDiaryDetail\",value:function(){var _getDiaryDetail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=this.state.id;_context.next=3;return axios.get(\"/diary/\".concat(id));case 3:res=_context.sent;this.setState({detail:res.data});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getDiaryDetail(){return _getDiaryDetail.apply(this,arguments);}return getDiaryDetail;}()},{key:\"onClickDelete\",value:function onClickDelete(){var _this2=this;var detail=this.state.detail;alert('警告⚠️','确定要删除吗?',[{text:'取消',onPress:function onPress(){return console.log('cancel');}},{text:'确定',onPress:function(){var _onPress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete('/diary/',{data:{uid:detail.uid,id:detail.id}});case 2:Toast.success('Delete Success',1);setTimeout(function(){_this2.props.history.goBack();},500);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function onPress(){return _onPress.apply(this,arguments);}return onPress;}()}]);}},{key:\"onClickModify\",value:function onClickModify(){this.props.history.push('/writeDiary',{diaryDetail:this.state.detail});}},{key:\"onClickGoback\",value:function onClickGoback(){this.props.history.goBack();}},{key:\"render\",value:function render(){var style={wrap:{height:'100%',background:'#d7ebdd'},pad:{padding:'0 1.2rem',fontSize:'1.2rem',lineHeight:'1.5rem',maxHeight:'100%'},feature:{display:'flex',justifyContent:'space-between',alignItems:'center',color:'#3e7de0',margin:'1.2rem 0 2rem 0'},ability:{display:'flex',marginRight:'-1.2rem'},abilityItem:{display:'flex',alignItems:'center',marginRight:'1rem'},abilityItemIconSvg:{width:'1.4rem',height:'1.4rem',padding:'0 0.5rem 0'}};var detail=this.state.detail;return React.createElement(\"div\",{style:style.wrap},React.createElement(Header,{onClickGoback:this.onClickGoback.bind(this),onClickDelete:this.onClickDelete.bind(this),onClickModify:this.onClickModify.bind(this)}),detail.id&&React.createElement(\"div\",{style:style.pad},React.createElement(\"div\",{style:style.feature},React.createElement(\"div\",null,detail.create_time),React.createElement(\"div\",{style:style.ability},React.createElement(\"div\",{style:style.abilityItem},React.createElement(\"svg\",{className:\"icon svg-icon\",style:style.abilityItemIconSvg,\"aria-hidden\":\"true\"},React.createElement(\"use\",{href:\"#icon-xihuanhui\"})),React.createElement(\"span\",null,detail.favor_nums)),React.createElement(\"div\",{style:style.abilityItem},React.createElement(\"svg\",{className:\"icon svg-icon\",style:style.abilityItemIconSvg,\"aria-hidden\":\"true\"},React.createElement(\"use\",{href:\"#icon-eye\"})),React.createElement(\"span\",null,detail.look_nums)))),React.createElement(\"div\",null,detail.content)));}}]);return DiaryDetail;}(React.Component);export default DiaryDetail;","map":{"version":3,"sources":["/Users/hbt/MyProject/gitHub/react-diary/src/views/diary-detail.jsx"],"names":["React","Modal","Toast","axios","alert","Header","props","style","wrap","display","color","fontSize","height","justifyContent","alignItems","padding","background","feature","width","marginRight","icon","onClickGoback","onClickDelete","onClickModify","DiaryDetail","state","detail","id","match","params","getDiaryDetail","get","res","setState","data","text","onPress","console","log","delete","uid","success","setTimeout","history","goBack","push","diaryDetail","pad","lineHeight","maxHeight","margin","ability","abilityItem","abilityItemIconSvg","bind","create_time","favor_nums","look_nums","content","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Modal, Toast } from 'antd-mobile'\nimport axios from '../utils/request'\nconst alert = Modal.alert\n\nfunction Header(props) {\n  const style = {\n    wrap: {\n      display: 'flex',\n      color: '#fff',\n      fontSize: '1.2rem',\n      height: '3rem',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      padding: '0 1rem',\n      background: '#53a6db'\n    },\n    feature: {\n      display: 'flex',\n      width: '100px',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginRight: '-0.5rem'\n    },\n    icon: {\n      width: '2rem',\n      height: '2rem',\n      padding: '0.2rem',\n      color: '#fff'\n    }\n  }\n  return (\n    <div style={style.wrap}>\n      <span onClick={props.onClickGoback}>返回</span>\n      <div style={style.feature}>\n        <div onClick={props.onClickDelete}>\n          <svg className=\"icon svg-icon\" style={style.icon} aria-hidden=\"true\">\n            <use href=\"#icon-shanchu\" />\n          </svg>\n        </div>\n        <div onClick={props.onClickModify}>\n          <svg className=\"icon svg-icon\" style={style.icon} aria-hidden=\"true\">\n            <use href=\"#icon-bianji\" />\n          </svg>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nclass DiaryDetail extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      detail: '',\n      id: this.props.match.params.id\n    }\n  }\n  componentDidMount() {\n    this.getDiaryDetail()\n  }\n  async getDiaryDetail() {\n    const { id } = this.state\n    const res = await axios.get(`/diary/${id}`)\n    this.setState({\n      detail: res.data\n    })\n  }\n  onClickDelete() {\n    const { detail } = this.state\n    alert('警告⚠️', '确定要删除吗?', [\n      { text: '取消', onPress: () => console.log('cancel') },\n      {\n        text: '确定',\n        onPress: async () => {\n          await axios.delete('/diary/', {\n            data: {\n              uid: detail.uid,\n              id: detail.id\n            }\n          })\n          Toast.success('Delete Success', 1)\n          setTimeout(() => {\n            this.props.history.goBack()\n          }, 500)\n        }\n      }\n    ])\n  }\n  onClickModify() {\n    this.props.history.push('/writeDiary', {\n      diaryDetail: this.state.detail\n    })\n  }\n  onClickGoback() {\n    this.props.history.goBack()\n  }\n  render() {\n    const style = {\n      wrap: {\n        height: '100%',\n        background: '#d7ebdd'\n      },\n      pad: {\n        padding: '0 1.2rem',\n        fontSize: '1.2rem',\n        lineHeight: '1.5rem',\n        maxHeight: '100%'\n      },\n      feature: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        color: '#3e7de0',\n        margin: '1.2rem 0 2rem 0'\n      },\n      ability: {\n        display: 'flex',\n        marginRight: '-1.2rem'\n      },\n      abilityItem: {\n        display: 'flex',\n        alignItems: 'center',\n        marginRight: '1rem'\n      },\n      abilityItemIconSvg: {\n        width: '1.4rem',\n        height: '1.4rem',\n        padding: '0 0.5rem 0'\n      }\n    }\n    const detail = this.state.detail\n    return (\n      <div style={style.wrap}>\n        <Header\n          onClickGoback={this.onClickGoback.bind(this)}\n          onClickDelete={this.onClickDelete.bind(this)}\n          onClickModify={this.onClickModify.bind(this)}\n        ></Header>\n        {detail.id && (\n          <div style={style.pad}>\n            <div style={style.feature}>\n              <div>{detail.create_time}</div>\n              <div style={style.ability}>\n                <div style={style.abilityItem}>\n                  <svg\n                    className=\"icon svg-icon\"\n                    style={style.abilityItemIconSvg}\n                    aria-hidden=\"true\"\n                  >\n                    <use href=\"#icon-xihuanhui\" />\n                  </svg>\n                  <span>{detail.favor_nums}</span>\n                </div>\n                <div style={style.abilityItem}>\n                  <svg\n                    className=\"icon svg-icon\"\n                    style={style.abilityItemIconSvg}\n                    aria-hidden=\"true\"\n                  >\n                    <use href=\"#icon-eye\" />\n                  </svg>\n                  <span>{detail.look_nums}</span>\n                </div>\n              </div>\n            </div>\n            <div>{detail.content}</div>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default DiaryDetail\n"]},"metadata":{},"sourceType":"module"}